<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Workout Tracker</title>
  <link rel="stylesheet" href="style.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
</head>
<body>
  
  <div class="header" style="display: inline-flex; align-items: center; margin-left: 20px;">
    <h1 style="margin-right: 20px;  flex-grow: 1;">Workout Tracker</h1> <!-- Adding right margin to create space between the heading and the button -->
    <div style="display: flex;">
      <div class="col-sm-2" style="margin-left: 90px;">
        <button type="button" id="validateBtn" class="btn btn-primary" style="width: 120px;background-color: green; border-color: black;">Start clock</button>
      </div>
      <div class="col-2 " style="margin-left: 80px; display: none">
        <button type="button" id="pauseBtn" class="btn btn-primary">Pause</button>
      </div>
      <div class="col-2" style="margin-left: 40px; display: none;">
        <button type="button" id="resetBtn" class="btn btn-primary" style="background-color: red; border: none;">reset</button>
      </div>
      
    </div>
  </div>


  
  <hr>

  <div class="col-sm-2" style="margin-left: 90px; display: none;">
    <button type="button" id="backupbtn" class="btn btn-primary" style="width: 120px;background-color: green; border-color: black;">backup</button>
    <div id="passwordPrompt" style="display: none;">
      <label for="password">Enter Password:</label>
      <input type="password" id="password" />
      <button type="button" id="submitPassword">Submit</button>
      <div id="error" style="color: red;"></div>
    </div>
  </div>
  
  <!-- Workout Management Section -->
  <div id="workoutManagement">
    <div style="margin-left: 20px;"><h2>Start Workout</h2></div>
   
    <form id="workoutForm"> 
      <div class="row p-3">
        <!-- Exercise Label -->
        <div class="col-3">
          <label for="exerciseSelect">Choose Exercise:</label>
        </div>
      
        <!-- Exercise Select Dropdown -->
        <div class="col-sm-2">
          <select id="exerciseSelect" class="form-control"></select>
        </div>
      
        <!-- Add Exercise Button -->
        <div class="col-sm-5">
          <button type="button" id="addExerciseBtn" class="btn btn-primary">Add</button>
        

        <div style="margin-left: 20px; display: inline-flex;" >
          <div class="form-check" >
            <input type="checkbox" id="seefocusCheckbox" class="form-check-input">
            <label class="form-check-label" for="seefocusCheckbox">Focus Areas:</label>
          </div>
        </div></div>
        

      </div>
    </form>
  </div>

  <div class="row" id="exerciseList">
    <!-- List of added exercises will appear here -->
  </div>
    
  <div class="row p-3">
    <div class="col-sm-2">
      <button style="width: 135px;" id="saveWorkoutBtn">Save Workout</button>
    </div>
  
    <div class="col-sm-10">
      <div id="resultsection" class="hidden">
        <div class="row align-items-center"> <!-- üëà This aligns input + button vertically centered -->
          <div class="col-auto">
            <input type="text" id="lastworkoutresult" class="form-control" placeholder="How did you feel after your workout on [date]?" 
            style="min-width: 450px; background-color: rgb(247, 216, 221); max-height: 29.2px;">
          </div>
          <div class="col-auto">
            <button type="button" id="savelastworkoutbtn" class="btn"  style=" max-height: 29.2px;" onclick="savelastworkoutresult()">‚ûï</button>
          </div>
        </div>
      </div>
    </div>
  </div>
  


  <hr>

  <!-- Add Exercise Section -->
  <div class="row p-3" id="addExerciseSectiondiv">
    <!-- Add and Edit Section -->
    <div class="col-12">
        <button style="width: 135px;" id="toggleFormBtn">Add and Edit</button>
        <section id="addExerciseSection" style="margin-top: 10px;" class="hidden">
            <form id="addExerciseForm" style="display: flex; gap: 15px; align-items: center; flex-wrap: wrap;">
                <label for="newExerciseName">Exercise Name:</label>
                <input type="text" id="newExerciseName" placeholder="Enter exercise name" required>
                <input type="text" id="newExerciseNote" placeholder="Add exercise note?">
                <div class="row align-items-center">
                  <div class="col-auto">
                    <label for="exerciseCategory">Choose Category:</label>
                  </div>
                  <div class="col">
                    <select id="exerciseCategory" class="form-control">
                      <option value="upper body push">Upper body push</option>
                      <option value="upper body pull">Upper body pull</option>
                      <option value="core">Core</option>
                      <option value="legs">Legs</option>
                      <option value="groin, hips, glutes">Groin, Hips, Glutes</option>
                      <option value="misc physio">Misc. physio</option>
                      <option value="full body">Full Body</option>
                      <option value="activity">Activity</option>
                      <option value="complex functional">Complex Functional</option>
                      <option value="none">None</option>
                    </select>
                  </div>
                </div>
                
                <div class="row align-items-center">
                  <div class="col-auto">
                    <label>
                      <input type="checkbox" id="focusCheckbox"> Focus Areas:
                    </label>
                  </div>
                  <!-- Preserve the focus container here -->
                  <div class="col" id="focusContainer" style="display: none;">
                    <select id="focusCategory" multiple class="form-control">
                      <option value="addNew">Add New</option>
                    </select>
                  </div>
                </div>
                
                
                <button type="button" id="saveNewExerciseBtn">Add Exercise</button>
            </form>
            <button style="width: 160px; margin-top: 10px;" id="showeditorbtn" >Workout Editor</button>
            <button style="width: 160px; margin-top: 10px;" id="showexoeditorbtn" >Exercise Editor</button>
        </section> 
    </div>
    <!-- Editor Section (Appears Below) -->

        <div id="workouteditor" >
            <div id="editorsection" style="margin-top: 10px;" class="hidden">
                <button type="button" onclick="prevNode()">‚¨ÖÔ∏è</button>
                <button type="button" onclick="nextNode()">‚û°Ô∏è</button>
                <button type="button" onclick="addpastexercise()">‚ûï Add exercise</button>
                <button type="button" onclick="saveChanges()">üíæ Save changes</button>
                <button type="button" onclick="deleteworkout()">üóëÔ∏è Delete workout</button>
                <form id="editForm"></form>
                <div style="margin-top: 10px; border-left: 10px solid rgb(255, 213, 0); padding-left: 10px;" id="fields"></div>
            </div>
        </div>
        <div style="margin-top: 10px;" class="hidden" id="exerciseeditor" >
              <!-- Optionally, add a selector for the type if needed -->


              <!-- Your exercise management section -->
              <div id="exoeditorsection">
                <button type="button" onclick="prevexo()">‚¨ÖÔ∏è</button>
                <button type="button" onclick="nextexo()">‚û°Ô∏è</button>
                <button type="button" onclick="saveexo()">üíæ Save changes</button>
                <button type="button" onclick="deleteexo()">üóëÔ∏è Delete exercise</button><br>
              <div style="margin-top: 10px; border-left: 10px solid rgb(255, 157, 0); padding-left: 10px;">
                <select style="margin-top: 10px;" id="typeSelector">
                  <option value="exercises">Exercises</option>
                  <option value="focusareas">Focus Areas</option>
                </select>
  
                <!-- Dropdown for selecting a category -->
                <select id="categorySelector"></select>
                <div id="exercisenotessection" style="margin-top: 10px;"></div>
                <div id="exerciseeditorsection" style="margin-top: 10px;"></div>
              </div></div>

          </div>
      </div>

</div>

    
  <hr>

  <div class="row p-3">
    <div class="col-5" id="showchart">
      <button style="width: 135px;" id="showchartbtn" class="click">Show chart</button>
      <select id="filter-type" onchange="generatevisuals()">
        <option value="all">All Days</option>
        <option value="regular">Workout</option>
        <option value="running">Running</option>
        <option value="activity">Activity</option>
      </select>
      
      
    </div>
    <div id="visuals-container"></div>
  </div>

  <hr>

  <div class="row p-3">
    <div class="col-5" id="showworkouts">
      <button style="width: 135px;" class="click">Show workouts</button>
      <select id="workout-filter" style="display: none;">
        <option value="all">All</option>
        <option value="regular">Workouts</option>
        <option value="running">Running</option>
        <option value="activity">Activity</option>
      </select>
      
    </div>
    <!-- Saved Workouts Section -->
    <div class="row p-3 hidden" id="savedWorkoutList">
      <!-- Saved workouts will appear here -->
    </div>
  </div>

  <!-- Firebase SDK 8.x -->
  <script src="https://www.gstatic.com/firebasejs/8.7.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.7.1/firebase-database.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.7.1/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.7.1/firebase-messaging.js"></script>

  <!-- JavaScript -->
  <script src="js/app.js" defer></script>
  <script src="js/analytics.js" defer></script>
  <script src="js/auth.js" defer></script>
  <script src="js/progress.js" defer></script>

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/date-fns"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns/dist/chartjs-adapter-date-fns.bundle.min.js"></script>

  <hr>

  <div class="row p-3">
    <div class="col-2" id="showcal">
      <button style="width: 135px;" class="click">Show calendar</button>
    </div>
    
    <div id="calendar-container" style="padding-top: 20px; display: none;"></div>
  </div>
  
  <hr>

  

  <div class="row p-3" id="progressdiv">
    <!-- Add and Edit Section -->
    <div class="col-12">
      <button style="width: 135px;" id="toggleprogressBtn">Show progress</button>
      <div id="progressarea" class="hidden"><section id="Progress section" style="margin-top: 10px;">
  
        <select id="ORMexerciseInput" style="width: 160px;">

          <!-- Add other exercises as needed -->
        </select>
        <input type="number" id="ORMrepsInput" placeholder="Reps (4-6)" />
        <input type="number" id="ORMweightInput" placeholder="Weight (kg)" />
        <button onclick="handleRecordMaxEffort()">Record max effort set</button>
  
        <select id="ORMexerciseDropdown" style="width: 160px;" class="hidden">

          <!-- Add other exercises as needed -->
        </select>
        
        <button onclick="generateChart()">Chart</button>     
        <br>   <br>
            
            <canvas id="progress-chart" width="800" height="500"></canvas>
            <button id="toggleButton" class="hidden">Show Data</button>

            <ul id="performanceList" class="hidden"></ul>
      </div>
      </div>
    </div>
  </div>
  


          
           
          </section>
      </div>
  </div>






  <style>
    /* Add styles for the toggle and fields */
    .sr-fields {
      display: none;
      margin-top: 10px;
    }
    .sr-fields input {
      margin: 5px 0;
    }
    .hidden {
      display: none;
    }
  </style>

<script type="text/javascript">
  // Initialize Firebase
  var firebaseConfig = {
    apiKey: "AIzaSyAvY5Rvn4L0YpYG9YoHJHAQJiuyShB6z48",
    authDomain: "workouts-725cd.firebaseapp.com",
    databaseURL: "https://workouts-725cd-default-rtdb.europe-west1.firebasedatabase.app/",
    projectId: "workouts-725cd",
    storageBucket: "workouts-725cd.appspot.com",
    messagingSenderId: "827249841873",
    appId: "1:827249841873:web:b9906649f774d1be9257f0"
  };
  // Initialize Firebase
  firebase.initializeApp(firebaseConfig);
  const messaging = firebase.messaging();
  const database = firebase.database();  // Realtime Database initialized here

</script>






</body>
</html>
